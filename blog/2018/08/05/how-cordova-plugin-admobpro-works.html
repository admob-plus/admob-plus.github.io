<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>How cordova-plugin-admobpro works · AdMob Plus</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="I believe most [`cordova-plugin-admobpro`](https://www.npmjs.com/package/cordova-plugin-admobpro) users do not know how the plugin works, as the author does not explain it or intentionally hide it. This blog post is going to uncover the details, so users could have better understanding about what is added to their projects."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="How cordova-plugin-admobpro works · AdMob Plus"/><meta property="og:type" content="website"/><meta property="og:url" content="https://admob-plus.github.io/blog/2018/08/05/how-cordova-plugin-admobpro-works.html"/><meta property="og:description" content="I believe most [`cordova-plugin-admobpro`](https://www.npmjs.com/package/cordova-plugin-admobpro) users do not know how the plugin works, as the author does not explain it or intentionally hide it. This blog post is going to uncover the details, so users could have better understanding about what is added to their projects."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/undefined"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="alternate" type="application/atom+xml" href="https://admob-plus.github.io/blog/atom.xml" title="AdMob Plus Blog ATOM Feed"/><link rel="alternate" type="application/rss+xml" href="https://admob-plus.github.io/blog/feed.xml" title="AdMob Plus Blog RSS Feed"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/css/main.css"/></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><h2 class="headerTitle">AdMob Plus</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="/docs/installation.html" target="_self">Docs</a></li><li class=""><a href="/docs/faq.html" target="_self">FAQ</a></li><li class=""><a href="/en/users.html" target="_self">Users</a></li><li class="siteNavGroupActive"><a href="/blog" target="_self">Blog</a></li><li class=""><a href="https://ratson.name/fund-admob-plus/" target="_self">Funding</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Recent Posts</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Recent Posts</h3><ul><li class="navListItem navListItemActive"><a class="navItem" href="/blog/2018/08/05/how-cordova-plugin-admobpro-works.html">How cordova-plugin-admobpro works</a></li><li class="navListItem"><a class="navItem" href="/blog/2018/07/15/history-of-cordova-plugin-admob-free.html">History of cordova-plugin-admob-free</a></li></ul></div></div></section></div><script>
            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer postContainer blogContainer"><div class="wrapper"><div class="lonePost"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle"><a href="/blog/2018/08/05/how-cordova-plugin-admobpro-works.html">How cordova-plugin-admobpro works</a></h1><p class="post-meta">August 5, 2018</p><div class="authorBlock"><p class="post-authorName"><a href="https://github.com/ratson" target="_blank" rel="noreferrer noopener">Ratson</a></p></div></header><div><span><p>I believe most <a href="https://www.npmjs.com/package/cordova-plugin-admobpro"><code>cordova-plugin-admobpro</code></a> users do not know how the plugin works, as the author does not explain it or intentionally hide it. This blog post is going to uncover the details, so users could have better understanding about what is added to their projects.</p>
<h2><a class="anchor" aria-hidden="true" id="cordova-plugin-extension"></a><a href="#cordova-plugin-extension" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>cordova-plugin-extension</h2>
<p>When looking at <a href="https://github.com/floatinghotpot/cordova-admob-pro">the repository</a>, it looks like a normal cordova plugin repository, where source code are <code>src</code> and <code>www</code>.</p>
<p>Until you read the source code line by line, you will find the native plugin classes are inherited from <a href="https://github.com/floatinghotpot/cordova-admob-pro/blob/master/src/android/AdMobPlugin.java#L39"><code>com.rjfun.cordova.ad.GenericAdPlugin</code></a> and <a href="https://github.com/floatinghotpot/cordova-admob-pro/blob/master/src/ios/CDVAdMobPlugin.h#L11"><code>GenericAdPlugin</code></a>, which are come from <a href="https://github.com/floatinghotpot/cordova-admob-pro/blob/master/plugin.xml#L25"><code>cordova-plugin-extension</code></a>.</p>
<p>The author has removed the source repository which results <a href="https://www.npmjs.com/package/cordova-plugin-extension">the npm page</a> pointing to a broken link in GitHub. This should prevent a normal user finding out the content, but an advanced user could still check <a href="https://unpkg.com/cordova-plugin-extension@1.5.4/">the npm tarball content</a>.</p>
<p>The plugin has included 2 suspicious binary files, <a href="https://unpkg.com/cordova-plugin-extension@1.5.4/src/android/cordova-generic-ad.jar">cordova-generic-ad.jar</a> and <a href="https://unpkg.com/cordova-plugin-extension@1.5.4/src/ios/libCordovaGenericAd.a">libCordovaGenericAd.a</a>. Clearly, they are providing the base native plugin classes.</p>
<h2><a class="anchor" aria-hidden="true" id="phoning-home"></a><a href="#phoning-home" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Phoning home</h2>
<p>Since the base classes are coming from binray files, it is hard to know what they are doing. However, when trying to inspect the network requests with the plugin installed, it tells more. A HTTP request is sent after the app starts,</p>
<pre><code class="hljs css languages- http"><span class="hljs-keyword">POST</span> <span class="hljs-string">http://adlic.rjfun.com/adlic</span> HTTP/1.1
<span class="hljs-attribute">Host</span>: adlic.rjfun.com
<span class="hljs-attribute">Content-Type</span>: application/x-www-form-urlencoded
<span class="hljs-attribute">User-Agent</span>: Demo/1.0.0 CFNetwork/901.1 Darwin/17.7.0
<span class="hljs-attribute">Accept-Language</span>: en-us

<span class="dts">app=com.rjfun.demo<span class="hljs-variable">&amp;os</span>=ios<span class="hljs-variable">&amp;net</span>=admob<span class="hljs-variable">&amp;lic</span>=
</span></code></pre>
<p>It returns a JSON data,</p>
<pre><code class="hljs css languages- json">{<span class="hljs-attr">"r"</span>:<span class="hljs-number">0</span>,<span class="hljs-attr">"b"</span>:<span class="hljs-string">""</span>,<span class="hljs-attr">"i"</span>:<span class="hljs-string">""</span>,<span class="hljs-attr">"n"</span>:<span class="hljs-string">""</span>,<span class="hljs-attr">"v"</span>:<span class="hljs-string">""</span>,<span class="hljs-attr">"js"</span>:<span class="hljs-string">""</span>}
</code></pre>
<p>At this point, it is clear the plugin collecting your app info to the author owned server and response data for the plugin to consume. A guess usage would be <a href="https://github.com/floatinghotpot/cordova-admob-pro#license">checking the license</a>, but the author never mentions it in the documentation.</p>
<h2><a class="anchor" aria-hidden="true" id="remote-controlling-ads"></a><a href="#remote-controlling-ads" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Remote controlling ads</h2>
<p>Thanks to <a href="https://drive.google.com/file/d/0B5vtpya8P4b-NUZTdUhBVkFlU0E/view">a document shared by a user</a>, it revealed more about the black magic.</p>
<p>From the user,</p>
<blockquote>
<p>i am using your plugin in my app. I have never use any license key. I wanted to share 2% of my ad. BUT! Your plugin took 30% of my ad.</p>
</blockquote>
<p>From the plugin author,</p>
<blockquote>
<p>After check, we find your app in the black list, and a random higher rate will be applied. Usually when a guy is using a fake license key, or send unusual attacking request (for example, request not from iOS/android cordova platform), the ant­crack logic will be triggered and move the app into the black list.</p>
<p>As mentioned in the license agreement, if you have earned more than $1000, a valid license is required, or else some ad sharing will be applied. When you use my code in your app, you are assumed to accept the license agreement. If you did not accept my term, then you are not allowed to use my code without permission.</p>
<p>Second, the ad sharing rate is not as what you guess. You may not know that, for any new app, the ad sharing is 0% from beginning, not 2%. When the system calculate your earning exceed $1000, if no license key is still provided, it will start to applied 2% ad sharing. But, when unusual request detected, it will increase the rate bit by bit, but no more than 30%.</p>
</blockquote>
<p>The plugin has ability to control how much ad-sharing from the server, and will increase ad-sharing according to some undocumented conditions. The author claims it will not share more than 30% ad revenue.</p>
<h2><a class="anchor" aria-hidden="true" id="conclusion"></a><a href="#conclusion" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Conclusion</h2>
<p>The author of <code>cordova-plugin-admobpro</code> has using a very sophisticated approach to do ad-sharing without telling much details it, or writing <a href="https://github.com/floatinghotpot/coding-to-monetization">a very detailed document</a> to promote his plugin, but not mentioning the ad-sharing part. It is hard judge if it is an issue of honesty, but I don't think it aligns the spirit of open source.</p>
<p>With the increasing adoption of <a href="https://github.com/ratson/cordova-plugin-admob-free">cordova-plugin-admob-free</a>, I wish there is an enough momentum to finance <a href="https://admob-plus.github.io/">a sustainable and trustable AdMob plugin</a>.</p>
<p>If you do have to stick with <code>cordova-plugin-admobpro</code>, consider adding analytics whenever displaying ads to compare it with you ad display count, so as least you know how much is lost.</p>
</span></div></div><div class="blogSocialSection"></div></div><div class="blog-recent"><a class="button" href="/blog">Recent Posts</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#cordova-plugin-extension">cordova-plugin-extension</a></li><li><a href="#phoning-home">Phoning home</a></li><li><a href="#remote-controlling-ads">Remote controlling ads</a></li><li><a href="#conclusion">Conclusion</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><h5>Docs</h5><a href="/docs/installation.html">Getting Started</a></div><div><h5>More</h5><a href="https://github.com/admob-plus/admob-plus">GitHub</a><a href="https://github.com/admob-plus/admob-plus/issues">Issues</a><a class="github-button" href="https://github.com/admob-plus/admob-plus" data-icon="octicon-star" data-count-href="/admob-plus/admob-plus" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section></footer></div></body></html>