"use strict";(self.webpackChunkadmob_plus_website=self.webpackChunkadmob_plus_website||[]).push([[7712],{9492:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>d});var t=s(7512),o=s(5640);const a={title:"Request User Consent",sidebar_label:"Request Consent",slug:"/cordova/consent"},r=void 0,i={id:"cordova/consent/request",title:"Request User Consent",description:"Installation",source:"@site/docs/cordova/consent/request.md",sourceDirName:"cordova/consent",slug:"/cordova/consent",permalink:"/docs/cordova/consent",draft:!1,unlisted:!1,editUrl:"https://github.com/admob-plus/admob-plus/edit/master/website/docs/cordova/consent/request.md",tags:[],version:"current",frontMatter:{title:"Request User Consent",sidebar_label:"Request Consent",slug:"/cordova/consent"},sidebar:"docs",previous:{title:"Volume Control",permalink:"/docs/cordova/volume-control"},next:{title:"Exports",permalink:"/docs/cordova/consent/api/"}},c={},d=[{value:"Installation",id:"installation",level:2},{value:"Prerequisites",id:"prerequisites",level:2},{value:"Usage",id:"usage",level:2},{value:"Forward consent",id:"forward-consent",level:2},{value:"References",id:"references",level:2}];function l(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.M)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-shell",children:"cordova plugin add cordova-plugin-consent\n"})}),"\n",(0,t.jsx)(n.h2,{id:"prerequisites",children:"Prerequisites"}),"\n",(0,t.jsxs)(n.p,{children:["You must have a ",(0,t.jsx)(n.a,{href:"https://support.google.com/fundingchoices/answer/9180084",children:"Funding Choices"})," account linked to your AdMob account."]}),"\n",(0,t.jsxs)(n.p,{children:["To create a Funding Choices account, go to ",(0,t.jsx)(n.strong,{children:"Privacy & messaging"})," in the AdMob UI and select ",(0,t.jsx)(n.strong,{children:"Go to Funding Choices"}),". The Funding Choices account is then created automatically in the background."]}),"\n",(0,t.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"document.addEventListener('deviceready', async () => {\n  if (cordova.platformId === 'ios') {\n    const status = await consent.trackingAuthorizationStatus()\n    /*\n      trackingAuthorizationStatus:\n      0 = notDetermined\n      1 = restricted\n      2 = denied\n      3 = authorized\n    */\n    const statusNew = await consent.requestTrackingAuthorization()\n  }\n\n  const consentStatus = await consent.getConsentStatus()\n  if (consentStatus === consent.ConsentStatus.Required) {\n    await consent.requestInfoUpdate()\n  }\n\n  await consent.loadAndShowIfRequired()\n\n  if (await consent.canRequestAds()) {\n    // request ads\n  }\n}, false)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"forward-consent",children:"Forward consent"}),"\n",(0,t.jsxs)(n.p,{children:["If a user has consented to receive only non-personalized ads, pass ",(0,t.jsx)(n.code,{children:'npa="1"'})," when creating the ad, e.g."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",metastring:"{3}",children:"new admob.BannerAd({\n  adUnitId: 'ca-app-pub-xxx/yyy',\n  npa: '1',\n})\n"})}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.code,{children:"npa"})," parameter is applicable to all ad formats, e.g. ",(0,t.jsx)(n.a,{href:"./api/classes/BannerAd",children:(0,t.jsx)(n.code,{children:"BannerAd"})}),", ",(0,t.jsx)(n.a,{href:"./api/classes/InterstitialAd",children:(0,t.jsx)(n.code,{children:"InterstitialAd"})}),", ",(0,t.jsx)(n.a,{href:"./api/classes/RewardedAd",children:(0,t.jsx)(n.code,{children:"RewardedAd"})}),", ",(0,t.jsx)(n.a,{href:"./api/classes/RewardedInterstitialAd",children:(0,t.jsx)(n.code,{children:"RewardedInterstitialAd"})}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"/docs/cordova/consent/api/enums/TrackingAuthorizationStatus",children:"TrackingAuthorizationStatus"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://developers.google.com/admob/ump/android/quick-start",children:"UMP SDK for Android"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://developers.google.com/admob/ump/ios/quick-start",children:"UMP SDK for iOS"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.a,{href:"https://developer.apple.com/documentation/apptrackingtransparency",children:"AppTrackingTransparency Framework"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,o.M)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},5640:(e,n,s)=>{s.d(n,{I:()=>i,M:()=>r});var t=s(5496);const o={},a=t.createContext(o);function r(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);