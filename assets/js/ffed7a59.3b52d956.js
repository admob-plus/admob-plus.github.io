"use strict";(self.webpackChunkadmob_plus_website=self.webpackChunkadmob_plus_website||[]).push([[5916],{104:(e,o,t)=>{t.r(o),t.d(o,{assets:()=>h,contentTitle:()=>n,default:()=>p,frontMatter:()=>g,metadata:()=>i,toc:()=>a});var s=t(7512),l=t(5640);const g={title:"WebView Ad",sidebar_label:"WebView"},n=void 0,i={id:"cordova/ads/webview",title:"WebView Ad",description:"This feature requires careful handling about how your app is loading and presented to conform the Google AdSense requirements, your account may be banned from mis-configuration.",source:"@site/docs/cordova/ads/webview.md",sourceDirName:"cordova/ads",slug:"/cordova/ads/webview",permalink:"/docs/cordova/ads/webview",draft:!1,unlisted:!1,editUrl:"https://github.com/admob-plus/admob-plus/edit/master/website/docs/cordova/ads/webview.md",tags:[],version:"current",frontMatter:{title:"WebView Ad",sidebar_label:"WebView"},sidebar:"docs",previous:{title:"Rewarded Interstitial",permalink:"/docs/cordova/ads/rewarded-interstitial"},next:{title:"Test Ads",permalink:"/docs/cordova/test-ads"}},h={},a=[{value:"Installation",id:"installation",level:2},{value:"AdSense",id:"adsense",level:2},{value:"Getting Started",id:"getting-started",level:2},{value:"Preferences in config.xml",id:"preferences-in-configxml",level:3},{value:"Performance issue (Only Android)",id:"performance-issue-only-android",level:3},{value:"Content-Security-Policy in index.html",id:"content-security-policy-in-indexhtml",level:3},{value:"Usage",id:"usage",level:2},{value:"Ad Slot",id:"ad-slot",level:3},{value:"Ad Format",id:"ad-format",level:3},{value:"Full Width Responsive",id:"full-width-responsive",level:3},{value:"History",id:"history",level:2},{value:"Set Page",id:"set-page",level:3},{value:"Replace State",id:"replace-state",level:3},{value:"Original Href",id:"original-href",level:3},{value:"Current Href",id:"current-href",level:3},{value:"Restore Original Href",id:"restore-original-href",level:3},{value:"Resize Observer",id:"resize-observer",level:3}];function r(e){const o={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.M)(),...e.components},{Details:t}=o;return t||function(e,o){throw new Error("Expected "+(o?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.admonition,{type:"warning",children:(0,s.jsx)(o.p,{children:"This feature requires careful handling about how your app is loading and presented to conform the Google AdSense requirements, your account may be banned from mis-configuration."})}),"\n",(0,s.jsxs)(o.p,{children:["WebView Ad is the integration of ",(0,s.jsx)(o.a,{href:"https://developers.google.com/admob/android/webview",children:"WebView API for Ads"})," for ",(0,s.jsx)(o.a,{href:"https://developers.google.com/admob/android/webview",children:"Android"})," and ",(0,s.jsx)(o.a,{href:"https://developers.google.com/admob/ios/webview",children:"iOS"})," in the Cordova WebView, with this ads you can show AdSense ads in your app."]}),"\n",(0,s.jsxs)(o.p,{children:["In addtion to installing ",(0,s.jsx)(o.code,{children:"admob-plus-cordova"}),", you will need to install ",(0,s.jsx)(o.code,{children:"admob-plus-cordova-webview-ad"})," for displaying WebView ads."]}),"\n",(0,s.jsx)(o.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-sh-session",children:"cordova plugin add admob-plus-cordova-webview-ad --save\n"})}),"\n",(0,s.jsx)(o.h2,{id:"adsense",children:"AdSense"}),"\n",(0,s.jsxs)(o.p,{children:["In order to use these ads you need to have an active ",(0,s.jsx)(o.a,{href:"https://www.google.com/adsense/start/",children:"AdSense"})," account, content in the WebView is subject to the same ",(0,s.jsx)(o.a,{href:"https://support.google.com/publisherpolicies/answer/11112688",children:"content policy requirement"})," as when it is in a browser."]}),"\n",(0,s.jsx)(o.p,{children:"See also:"}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsx)(o.li,{children:(0,s.jsx)(o.a,{href:"https://support.google.com/admob/answer/48182#trs",children:"Technical requirements for web content viewing frames for apps"})}),"\n",(0,s.jsx)(o.li,{children:(0,s.jsx)(o.a,{href:"https://support.google.com/publisherpolicies/answer/11112688",children:"Google-served ads on screens without publisher-content"})}),"\n"]}),"\n",(0,s.jsx)(o.h2,{id:"getting-started",children:"Getting Started"}),"\n",(0,s.jsxs)(o.p,{children:["Before you can display ads in the WebView, you'll need to do some preliminary steps and have done the ",(0,s.jsx)(o.a,{href:"https://admob-plus.github.io/docs/cordova",children:"Getting Started"})," steps of the plugin."]}),"\n",(0,s.jsx)(o.h3,{id:"preferences-in-configxml",children:"Preferences in config.xml"}),"\n",(0,s.jsxs)(o.p,{children:["Enable the WebView API for Ads by adding ",(0,s.jsx)(o.code,{children:"AdMobPlusWebViewAd"})," in ",(0,s.jsx)(o.code,{children:"config.xml"}),", this option causes the WebView to be registered with the AdMob SDK."]}),"\n",(0,s.jsxs)(o.p,{children:["It is also necessary to add your AdSense domain as ",(0,s.jsx)(o.code,{children:"Hostname"})," of the CordovaWebView."]}),"\n",(0,s.jsxs)(o.p,{children:[(0,s.jsx)(o.strong,{children:"Warning:"})," If you use localStorage to storage data, please note that the previously data will not be accessible when you change the hostname."]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-xml",children:'<preference name="Scheme" value="https" />\n<preference name="Hostname" value="example.com" />\n<preference name="AdMobPlusWebViewAd" value="true" />\n<preference name="AdMobPlusOverrideUrlLoading" value="true" />\n'})}),"\n",(0,s.jsxs)(o.p,{children:["If ads are not displayed correctly (Probably on iOS), you may also need to add the following config to your ",(0,s.jsx)(o.code,{children:"config.xml"})]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-xml",children:'<allow-navigation href="*" />\n'})}),"\n",(0,s.jsx)(o.h3,{id:"performance-issue-only-android",children:"Performance issue (Only Android)"}),"\n",(0,s.jsxs)(o.p,{children:["In order for the ads to show, the WebView needs to be registered with the AdMob SDK using ",(0,s.jsx)(o.code,{children:"MobileAds.registerWebView(webView)"}),", this has to be done before the URL is set to the WebView (",(0,s.jsx)(o.a,{href:"https://developers.google.com/admob/android/webview#register_the_webview",children:"https://developers.google.com/admob/android/webview#register_the_webview"}),"), for my part, I have not managed to do it before cordova does it, so for it to work I had to reload the WebView with ",(0,s.jsx)(o.code,{children:"WebView.reload()"}),", this affects the time of loading of the app, but I don't know if it is appreciable, it is possible to avoid this by registering the WebView in the ",(0,s.jsx)(o.code,{children:"MainActivity.java"}),", how to do it below."]}),"\n",(0,s.jsxs)(o.p,{children:["Any solution to this without changing the ",(0,s.jsx)(o.code,{children:"MainActivity.java"})," is welcome."]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Way that avoid reloading the WebView"}),(0,s.jsxs)("p",{children:[(0,s.jsxs)(o.p,{children:["Create a ",(0,s.jsx)(o.strong,{children:"MainActivity.java"})," file."]}),(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-java",children:'package app.package.name;\n\nimport android.os.Bundle;\nimport android.util.Log;\nimport android.webkit.WebView;\n\nimport com.google.android.gms.ads.MobileAds;\n\nimport org.apache.cordova.*;\n\npublic class MainActivity extends CordovaActivity\n{\n    @Override\n    public void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n\n        // enable Cordova apps to be started in the background\n        Bundle extras = getIntent().getExtras();\n        if (extras != null && extras.getBoolean("cdvStartInBackground", false)) {\n            moveTaskToBack(true);\n        }\n\n        loadUrl(launchUrl);\n\n        final CordovaActivity me = this;\n        // highlight-start\n        me.runOnUiThread(new Runnable() {\n            @Override\n            public void run() {\n                WebView webView = (WebView) appView.getView();\n                MobileAds.registerWebView(webView);\n                Log.d("AdMobPlus", "Integrated the WebView API for Ads in "+webView.getUrl()+" WebView from MainActivity");\n            }\n        });\n        // highlight-end\n    }\n}\n\n'})}),(0,s.jsxs)(o.p,{children:["Change ",(0,s.jsx)(o.code,{children:"app.package.name"})," to you app name."]}),(0,s.jsxs)(o.p,{children:["Remove this from ",(0,s.jsx)(o.code,{children:"config.xml"})," or change to ",(0,s.jsx)(o.code,{children:"false"})," (If you also use the WebView API for Ads on iOS, move it to ",(0,s.jsx)(o.code,{children:'<platform  name="ios">'})," and set to ",(0,s.jsx)(o.code,{children:"true"}),")"]}),(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-xml",children:'<preference name="AdMobPlusWebViewAd" value="true" />\n'})}),(0,s.jsx)(o.p,{children:"And add this hook:"}),(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-xml",children:'<hook type="before_build" src="update_main_activity.sh" />\n'})}),(0,s.jsxs)(o.p,{children:["Create a ",(0,s.jsx)(o.strong,{children:"update_main_activity.sh"})," file."]}),(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-bash",children:"#!/bin/bash\ncp MainActivity.java platforms/android/app/src/main/java/app/package/name/\n"})}),(0,s.jsxs)(o.p,{children:["Change the ",(0,s.jsx)(o.code,{children:"app/package/name/"})," to you app name."]}),(0,s.jsxs)(o.p,{children:["Now ",(0,s.jsx)(o.code,{children:"registerWebView"})," works without reloading the webview."]})]})]}),"\n",(0,s.jsx)(o.h3,{id:"content-security-policy-in-indexhtml",children:"Content-Security-Policy in index.html"}),"\n",(0,s.jsx)(o.p,{children:"If you have a strict CSP on your app, you will need to add Google/AdSense domains to your CSP."}),"\n",(0,s.jsx)(o.p,{children:"If you see any missing or extra domains, you can open a pull request or a issue in the repo."}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-bash",children:"https://2mdn.net https://google.com https://google.ca https://google.co.in https://google.co.kr https://google.co.uk https://google.co.za https://google.com.ar https://google.com.au https://google.com.br https://google.com.co https://google.com.gt https://google.com.mx https://google.com.pe https://google.com.ph https://google.com.pk https://google.com.tr https://google.com.tw https://google.com.vn https://google.de https://google.dk https://google.es https://google.fr https://google.nl https://google.no https://google.pl https://google.ru https://google.vg https://app-measurement.com https://doubleclick.com https://doubleclick.net https://doubleclickbygoogle.com https://google-analytics.com https://googleadservices.com https://googlesyndication.com https://googletagmanager.com https://googletagservices.com https://gemius.pl https://ampproject.org https://gstatic.com https://google.ad https://google.ae https://google.com.af https://google.com.ag https://google.com.ai https://google.al https://google.co.ao https://google.as https://google.at https://google.az https://google.com.bd https://google.be https://google.bf https://google.bg https://google.com.bh https://google.bi https://google.bj https://google.com.bn https://google.com.bo https://google.bs https://google.bt https://google.co.bw https://google.com.bz https://google.cd https://google.cf https://google.cg https://google.ch https://google.ci https://google.co.ck https://google.cl https://google.cm https://google.co.cr https://google.com.cu https://google.cv https://google.com.cy https://google.cz https://google.dj https://google.dm https://google.dz https://google.com.ec https://google.ee https://google.com.eg https://google.com.et https://google.fi https://google.com.fj https://google.fm https://google.ga https://google.ge https://google.gg https://google.com.gh https://google.com.gi https://google.gl https://google.gm https://google.gr https://google.gy https://google.com.hk https://google.hn https://google.hr https://google.ht https://google.hu https://google.co.id https://google.ie https://google.co.il https://google.im https://google.iq https://google.is https://google.it https://google.je https://google.com.jm https://google.jo https://google.co.jp https://google.co.ke https://google.com.kh https://google.ki https://google.kg https://google.com.kw https://google.kz https://google.la https://google.com.lb https://google.li https://google.lk https://google.co.ls https://google.lt https://google.lu https://google.lv https://google.com.ly https://google.md https://google.me https://google.mg https://google.mk https://google.ml https://google.com.mm https://google.mn https://google.ms https://google.com.mt https://google.mu https://google.mv https://google.mw https://google.com.my https://google.co.mz https://google.com.na https://google.com.ng https://google.com.ni https://google.ne https://google.com.np https://google.nr https://google.nu https://google.co.nz https://google.com.om https://google.com.pa https://google.com.pg https://google.pn https://google.com.pr https://google.ps https://google.pt https://google.com.py https://google.com.qa https://google.ro https://google.rw https://google.com.sa https://google.com.sb https://google.sc https://google.se https://google.com.sg https://google.sh https://google.si https://google.sk https://google.sn https://google.so https://google.sm https://google.sr https://google.st https://google.com.sv https://google.td https://google.tg https://google.co.th https://google.com.tj https://google.tl https://google.tm https://google.tn https://google.to https://google.tt https://google.co.tz https://google.com.ua https://google.co.ug https://google.com.uy https://google.co.uz https://google.com.vc https://google.co.ve https://google.co.vi https://google.vu https://google.ws https://google.rs https://google.co.zm https://google.co.zw https://google.cat https://googleapis.com https://*.2mdn.net https://*.google.com https://*.google.ca https://*.google.co.in https://*.google.co.kr https://*.google.co.uk https://*.google.co.za https://*.google.com.ar https://*.google.com.au https://*.google.com.br https://*.google.com.co https://*.google.com.gt https://*.google.com.mx https://*.google.com.pe https://*.google.com.ph https://*.google.com.pk https://*.google.com.tr https://*.google.com.tw https://*.google.com.vn https://*.google.de https://*.google.dk https://*.google.es https://*.google.fr https://*.google.nl https://*.google.no https://*.google.pl https://*.google.ru https://*.google.vg https://*.app-measurement.com https://*.doubleclick.com https://*.doubleclick.net https://*.doubleclickbygoogle.com https://*.google-analytics.com https://*.googleadservices.com https://*.googlesyndication.com https://*.googletagmanager.com https://*.googletagservices.com https://*.gemius.pl https://*.ampproject.org https://*.gstatic.com https://*.google.ad https://*.google.ae https://*.google.com.af https://*.google.com.ag https://*.google.com.ai https://*.google.al https://*.google.co.ao https://*.google.as https://*.google.at https://*.google.az https://*.google.com.bd https://*.google.be https://*.google.bf https://*.google.bg https://*.google.com.bh https://*.google.bi https://*.google.bj https://*.google.com.bn https://*.google.com.bo https://*.google.bs https://*.google.bt https://*.google.co.bw https://*.google.com.bz https://*.google.cd https://*.google.cf https://*.google.cg https://*.google.ch https://*.google.ci https://*.google.co.ck https://*.google.cl https://*.google.cm https://*.google.co.cr https://*.google.com.cu https://*.google.cv https://*.google.com.cy https://*.google.cz https://*.google.dj https://*.google.dm https://*.google.dz https://*.google.com.ec https://*.google.ee https://*.google.com.eg https://*.google.com.et https://*.google.fi https://*.google.com.fj https://*.google.fm https://*.google.ga https://*.google.ge https://*.google.gg https://*.google.com.gh https://*.google.com.gi https://*.google.gl https://*.google.gm https://*.google.gr https://*.google.gy https://*.google.com.hk https://*.google.hn https://*.google.hr https://*.google.ht https://*.google.hu https://*.google.co.id https://*.google.ie https://*.google.co.il https://*.google.im https://*.google.iq https://*.google.is https://*.google.it https://*.google.je https://*.google.com.jm https://*.google.jo https://*.google.co.jp https://*.google.co.ke https://*.google.com.kh https://*.google.ki https://*.google.kg https://*.google.com.kw https://*.google.kz https://*.google.la https://*.google.com.lb https://*.google.li https://*.google.lk https://*.google.co.ls https://*.google.lt https://*.google.lu https://*.google.lv https://*.google.com.ly https://*.google.md https://*.google.me https://*.google.mg https://*.google.mk https://*.google.ml https://*.google.com.mm https://*.google.mn https://*.google.ms https://*.google.com.mt https://*.google.mu https://*.google.mv https://*.google.mw https://*.google.com.my https://*.google.co.mz https://*.google.com.na https://*.google.com.ng https://*.google.com.ni https://*.google.ne https://*.google.com.np https://*.google.nr https://*.google.nu https://*.google.co.nz https://*.google.com.om https://*.google.com.pa https://*.google.com.pg https://*.google.pn https://*.google.com.pr https://*.google.ps https://*.google.pt https://*.google.com.py https://*.google.com.qa https://*.google.ro https://*.google.rw https://*.google.com.sa https://*.google.com.sb https://*.google.sc https://*.google.se https://*.google.com.sg https://*.google.sh https://*.google.si https://*.google.sk https://*.google.sn https://*.google.so https://*.google.sm https://*.google.sr https://*.google.st https://*.google.com.sv https://*.google.td https://*.google.tg https://*.google.co.th https://*.google.com.tj https://*.google.tl https://*.google.tm https://*.google.tn https://*.google.to https://*.google.tt https://*.google.co.tz https://*.google.com.ua https://*.google.co.ug https://*.google.com.uy https://*.google.co.uz https://*.google.com.vc https://*.google.co.ve https://*.google.co.vi https://*.google.vu https://*.google.ws https://*.google.rs https://*.google.co.zm https://*.google.co.zw https://*.google.cat https://*.googleapis.com\n"})}),"\n",(0,s.jsxs)(o.p,{children:["In iOS you also have to add your domain with the scheme ",(0,s.jsx)(o.code,{children:"app://"}),"."]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-bash",children:"app://yourdomain.com app://*.yourdomain.com\n"})}),"\n",(0,s.jsx)(o.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-js",children:"let webViewAd\n\ndocument.addEventListener('deviceready', async () => {\n  // Obtain user consent first\n\n  await admob.start(); // or start loading ads\n\n  // Only call this the first time\n  webViewAd = new admob.WebViewAd({\n    src: 'https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js',\n    adsense: 'ca-pub-xxx', // Your adsense account\n    npa: nonPersonalizedAds ? '1' : '',\n  });\n\n  // Load ads here\n}, false)\n"})}),"\n",(0,s.jsx)(o.h3,{id:"ad-slot",children:"Ad Slot"}),"\n",(0,s.jsxs)(o.p,{children:["AdSense ad unit id, AdSense/WebView supported ad units are ",(0,s.jsx)(o.code,{children:"Banner"}),", ",(0,s.jsx)(o.code,{children:"Native"}),", ",(0,s.jsx)(o.code,{children:"Interstitial"})," and ",(0,s.jsx)(o.code,{children:"Rewarded"}),", although AdSense supports ",(0,s.jsx)(o.code,{children:"Interstitial"})," and ",(0,s.jsx)(o.code,{children:"Rewarded"}),", it is preferable to use the native AdMob ones."]}),"\n",(0,s.jsxs)(o.p,{children:["See also: ",(0,s.jsx)(o.a,{href:"https://support.google.com/admob/answer/6128738",children:"Ad units, ad formats, & ad types"})]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-js",children:"webViewAd.addAd({\n  element: document.querySelector('.yourAddElement'),\n  slot: '000000000', // Ad slot id, supported ads https://support.google.com/admob/answer/6128738\n});\n"})}),"\n",(0,s.jsx)(o.h3,{id:"ad-format",children:"Ad Format"}),"\n",(0,s.jsxs)(o.p,{children:["By default, banner ad is displayed at the ",(0,s.jsx)(o.code,{children:"auto"})," ad format, which enables the auto-sizing behavior for the responsive ad unit."]}),"\n",(0,s.jsxs)(o.p,{children:["However, you can set a general shape for your responsive ad unit by changing the value of ad format to one of these values: ",(0,s.jsx)(o.code,{children:"rectangle"}),", ",(0,s.jsx)(o.code,{children:"vertical"}),", ",(0,s.jsx)(o.code,{children:"horizontal"})," or any combination of these separated by a comma, e.g. ",(0,s.jsx)(o.code,{children:"rectangle, horizontal"}),"."]}),"\n",(0,s.jsxs)(o.p,{children:["See also: ",(0,s.jsx)(o.a,{href:"https://support.google.com/adsense/answer/9183460?hl=en#zippy=%2Chorizontal-shape-example",children:"How to use responsive ad tag parameters: ad-format"})]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-js",children:"webViewAd.addAd({\n  element: document.querySelector('.yourAddElement'),\n  slot: '000000000', // Ad slot id, supported ads https://support.google.com/admob/answer/6128738\n  format: 'rectangle, horizontal',\n});\n"})}),"\n",(0,s.jsx)(o.h3,{id:"full-width-responsive",children:"Full Width Responsive"}),"\n",(0,s.jsxs)(o.p,{children:["The ",(0,s.jsx)(o.code,{children:"fullWidth"})," parameter determines whether your responsive ad unit expands to use the full width of the mobile device screen. Depending on how you use the ",(0,s.jsx)(o.code,{children:"fullWidth"})," parameter, you can make your responsive ad unit behave in different ways."]}),"\n",(0,s.jsxs)(o.p,{children:["By setting ",(0,s.jsx)(o.code,{children:"fullWidth"})," to ",(0,s.jsx)(o.code,{children:"false"}),", the ad don't want to automatically expand to use the full width of the mobile device screen."]}),"\n",(0,s.jsxs)(o.p,{children:["By default set to ",(0,s.jsx)(o.code,{children:"true"})]}),"\n",(0,s.jsxs)(o.p,{children:["See also: ",(0,s.jsx)(o.a,{href:"https://support.google.com/adsense/answer/9183460?hl=en#zippy=%2Cparameter-set-to-true-example",children:"How to use responsive ad tag parameters: full-width-responsive"})]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-js",children:"webViewAd.addAd({\n  element: document.querySelector('.yourAddElement'),\n  slot: '000000000', // Ad slot id, supported ads https://support.google.com/admob/answer/6128738\n  format: 'horizontal',\n  fullWidth: false,\n});\n"})}),"\n",(0,s.jsx)(o.h2,{id:"history",children:"History"}),"\n",(0,s.jsx)(o.p,{children:"AdSense applies policy restrictions at the page or account level, to prevent page level restrictions from affecting your entire app, it is recommended that you change the current WebView url depending on the open page in your app, if possible, It is recommended that these urls are the same as those used in the web version of your app."}),"\n",(0,s.jsxs)(o.p,{children:["All URLs set with ",(0,s.jsx)(o.code,{children:"historySetPage"})," and ",(0,s.jsx)(o.code,{children:"historyReplaceState"})," (Including ",(0,s.jsx)(o.code,{children:"index.html"}),") have to be accessible in the web version of your app (And they also must have the AdSense code applied and show the same ads as the app), this is necessary for the AdSense bot to be able to access them, if they are not accessible you will receive a warning/policy violation in the Policy Center, because of this, it is recommended to only set the urls on the pages where you want to display ads."]}),"\n",(0,s.jsxs)(o.p,{children:["It is also recommended that your app be prepared to stop displaying ads on a particular page (And stop use ",(0,s.jsx)(o.code,{children:"historySetPage/historyReplaceState"})," in this), in case you receive a policy violation on that page."]}),"\n",(0,s.jsx)(o.h3,{id:"set-page",children:"Set Page"}),"\n",(0,s.jsxs)(o.p,{children:["The simple way to replace the url, the following code generates a url something similar to ",(0,s.jsx)(o.code,{children:"https://example.com/article.html?id=754"})]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-js",children:"webViewAd.historySetPage('article.html', {id: 754});\n"})}),"\n",(0,s.jsx)(o.h3,{id:"replace-state",children:"Replace State"}),"\n",(0,s.jsxs)(o.p,{children:["With this you can replace the current url in a more personalized way, is the same as ",(0,s.jsx)(o.a,{href:"https://developer.mozilla.org/en-US/docs/Web/API/History/replaceState",children:(0,s.jsx)(o.code,{children:"History.replaceState(stateObj, unused, url)"})})," without ",(0,s.jsx)(o.code,{children:"stateObj"})," and ",(0,s.jsx)(o.code,{children:"unused"}),", the following code generates a url something similar to ",(0,s.jsx)(o.code,{children:"https://example.com/name-of-the-article-745"})]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-js",children:"webViewAd.historyReplaceState('name-of-the-article-745');\n"})}),"\n",(0,s.jsx)(o.h3,{id:"original-href",children:"Original Href"}),"\n",(0,s.jsxs)(o.p,{children:["Return the original href of the WebView, something similar to ",(0,s.jsx)(o.code,{children:"https://example.com/index.html"})]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-js",children:"let originalHref = webViewAd.historyOriginalHref();\n"})}),"\n",(0,s.jsx)(o.h3,{id:"current-href",children:"Current Href"}),"\n",(0,s.jsxs)(o.p,{children:["Return the current href of the WebView, is the same as ",(0,s.jsx)(o.code,{children:"window.location.href"})]}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-js",children:"let currentHref = webViewAd.historyCurrentHref();\n"})}),"\n",(0,s.jsx)(o.h3,{id:"restore-original-href",children:"Restore Original Href"}),"\n",(0,s.jsx)(o.p,{children:"This restores the original href of the WebView."}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-js",children:"webViewAd.historyRestoreOriginalHref();\n"})}),"\n",(0,s.jsx)(o.h3,{id:"resize-observer",children:"Resize Observer"}),"\n",(0,s.jsx)(o.p,{children:"Sometimes AdSense may not load any ads in the element, in these cases AdSense changes the ad height to 0, but if you have any margin/padding on the ad element or his parents, these will still take some space, you can use a ResizeObserver to detect this and remove margin/padding."}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-js",children:"var webViewResizeObserver = false;\n\n// Just once\nif(typeof ResizeObserver !== 'undefined' && !webViewResizeObserver) {\n  webViewResizeObserver = new ResizeObserver((entries) => {\n    for(let i = 0, len = entries.length; i < len; i++) {\n      let entry = entries[i];\n      let element = entry.target;\n\n      // Use if the margin/pading is owned by a parent\n      element = element.closest('.webViewParentName');\n\n      if(element) {\n        if(entry.contentRect.height == 0) {\n          element.style.marginTop = '0px';\n          element.style.marginBottom = '0px';\n          element.style.paddingTop = '0px';\n          element.style.paddingBottom = '0px';\n          ...\n        } else {\n          element.style.marginTop = '';\n          element.style.marginBottom = '';\n          element.style.paddingTop = '';\n          element.style.paddingBottom = '';\n          ...\n        }\n      }\n    }\n  });\n}\n"})}),"\n",(0,s.jsx)(o.p,{children:"and now"}),"\n",(0,s.jsx)(o.pre,{children:(0,s.jsx)(o.code,{className:"language-js",children:"// Add the element you have pass in webViewAd.addAd, this will have to be done for each ad\nwebViewResizeObserver.observe(webViewAd.element);\n"})})]})}function p(e={}){const{wrapper:o}={...(0,l.M)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(r,{...e})}):r(e)}},5640:(e,o,t)=>{t.d(o,{I:()=>i,M:()=>n});var s=t(5496);const l={},g=s.createContext(l);function n(e){const o=s.useContext(g);return s.useMemo((function(){return"function"==typeof e?e(o):{...o,...e}}),[o,e])}function i(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:n(e.components),s.createElement(g.Provider,{value:o},e.children)}}}]);