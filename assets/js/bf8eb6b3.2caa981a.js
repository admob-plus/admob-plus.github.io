"use strict";(self.webpackChunkadmob_plus_website=self.webpackChunkadmob_plus_website||[]).push([[457],{8171:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var s=t(5250),a=t(4550);const o={title:"Request User Consent",sidebar_label:"Request Consent",slug:"/cordova/consent"},r=void 0,i={id:"cordova/consent/request",title:"Request User Consent",description:"Installation",source:"@site/versioned_docs/version-1.x/cordova/consent/request.md",sourceDirName:"cordova/consent",slug:"/cordova/consent",permalink:"/docs/1.x/cordova/consent",draft:!1,unlisted:!1,editUrl:"https://github.com/admob-plus/admob-plus/edit/master/website/versioned_docs/version-1.x/cordova/consent/request.md",tags:[],version:"1.x",frontMatter:{title:"Request User Consent",sidebar_label:"Request Consent",slug:"/cordova/consent"},sidebar:"docs",previous:{title:"Volume Control",permalink:"/docs/1.x/cordova/volume-control"},next:{title:"Exports",permalink:"/docs/1.x/cordova/consent/api"}},c={},d=[{value:"Installation",id:"installation",level:2},{value:"Usage",id:"usage",level:2},{value:"Forward consent",id:"forward-consent",level:2},{value:"References",id:"references",level:2}];function l(e){const n={a:"a",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"cordova plugin add cordova-plugin-consent\n"})}),"\n",(0,s.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"document.addEventListener('deviceready', async () => {\n  if (cordova.platformId === 'ios') {\n    const trackingAuthorizationStatus = await admob.requestTrackingAuthorization()\n    /*\n      trackingAuthorizationStatus:\n      0 = notDetermined\n      1 = restricted\n      2 = denied\n      3 = authorized\n    */\n  }\n\n  const consentStatus = await consent.getConsentStatus()\n  if (consentStatus === consent.ConsentStatus.Required) {\n    await consent.requestInfoUpdate()\n  }\n\n  const formStatus = await consent.getFormStatus()\n  if (formStatus === consent.FormStatus.Available) {\n      const form = await consent.loadForm()\n      form.show()\n  }\n}, false)\n"})}),"\n",(0,s.jsx)(n.h2,{id:"forward-consent",children:"Forward consent"}),"\n",(0,s.jsxs)(n.p,{children:["If a user has consented to receive only non-personalized ads, pass ",(0,s.jsx)(n.code,{children:'npa="1"'})," when creating the ad, e.g."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",metastring:"{3}",children:"new admob.BannerAd({\n  adUnitId: 'ca-app-pub-xxx/yyy',\n  npa: '1',\n})\n"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"npa"})," parameter is applicable to ",(0,s.jsx)(n.a,{href:"./api/classes/bannerad",children:(0,s.jsx)(n.code,{children:"BannerAd"})}),", ",(0,s.jsx)(n.a,{href:"./api/classes/interstitialad",children:(0,s.jsx)(n.code,{children:"InterstitialAd"})}),", ",(0,s.jsx)(n.a,{href:"./api/classes/rewardedad",children:(0,s.jsx)(n.code,{children:"RewardedAd"})}),", ",(0,s.jsx)(n.a,{href:"./api/classes/rewardedinterstitialad",children:(0,s.jsx)(n.code,{children:"RewardedInterstitialAd"})}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/docs/1.x/cordova/api/enums/trackingauthorizationstatus",children:"TrackingAuthorizationStatus"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://developers.google.com/admob/ump/android/quick-start",children:"UMP SDK for Android"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://developers.google.com/admob/ump/ios/quick-start",children:"UMP SDK for iOS"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://developer.apple.com/documentation/apptrackingtransparency",children:"AppTrackingTransparency Framework"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,a.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},4550:(e,n,t)=>{t.d(n,{Z:()=>i,a:()=>r});var s=t(79);const a={},o=s.createContext(a);function r(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);